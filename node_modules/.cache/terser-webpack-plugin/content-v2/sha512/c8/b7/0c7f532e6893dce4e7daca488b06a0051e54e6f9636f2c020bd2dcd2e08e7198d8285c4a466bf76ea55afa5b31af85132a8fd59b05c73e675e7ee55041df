{"map":"{\"version\":3,\"sources\":[\"leaflet.trackplayback.js\"],\"names\":[\"root\",\"factory\",\"exports\",\"module\",\"require\",\"define\",\"amd\",\"a\",\"i\",\"window\",\"__WEBPACK_EXTERNAL_MODULE__0__\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"__webpack_exports__\",\"external_root_L_commonjs_leaflet_commonjs2_leaflet_amd_leaflet_\",\"external_root_L_commonjs_leaflet_commonjs2_leaflet_amd_leaflet_default\",\"isArray\",\"arr\",\"Array\",\"toString\",\"Track\",\"Class\",\"extend\",\"initialize\",\"trackData\",\"options\",\"setOptions\",\"this\",\"forEach\",\"item\",\"isOrigin\",\"_trackPoints\",\"_timeTick\",\"_update\",\"addTrackPoint\",\"trackPoint\",\"len\",\"length\",\"_addTrackPoint\",\"getTimes\",\"times\",\"push\",\"time\",\"getStartTrackPoint\",\"getEndTrackPoint\",\"getTrackPointByTime\",\"_getCalculateTrackPointByTime\",\"endpoint\",\"startPt\",\"endPt\",\"left\",\"right\",\"parseInt\",\"t0\",\"t1\",\"p0\",\"p1\",\"point\",\"lng\",\"lat\",\"distanceTo\",\"v\",\"sinx\",\"y\",\"cosx\",\"x\",\"step\",\"dir\",\"Math\",\"PI\",\"asin\",\"undefined\",\"getTrackPointsBeforeTime\",\"tpoints\",\"_sortTrackPointsByTime\",\"_updatetimeTick\",\"j\",\"tmp\",\"TrackController\",\"tracks\",\"draw\",\"_tracks\",\"addTrack\",\"_draw\",\"_updateTime\",\"getMinTime\",\"_minTime\",\"getMaxTime\",\"_maxTime\",\"track\",\"Error\",\"drawTracksByTime\",\"clear\",\"tps\",\"drawTrack\",\"stime\",\"etime\",\"Clock\",\"includes\",\"Mixin\",\"Events\",\"speed\",\"maxSpeed\",\"trackController\",\"_trackController\",\"_endTime\",\"_curTime\",\"_speed\",\"_maxSpeed\",\"_intervalID\",\"_lastFpsUpdateTime\",\"start\",\"Util\",\"requestAnimFrame\",\"_tick\",\"stop\",\"cancelAnimFrame\",\"rePlaying\",\"slowSpeed\",\"quickSpeed\",\"getSpeed\",\"getCurTime\",\"getStartTime\",\"getEndTime\",\"isPlaying\",\"setCursor\",\"fire\",\"setSpeed\",\"_caculatefpsTime\",\"now\",\"Date\",\"isPause\",\"stepTime\",\"pow\",\"TrackLayer\",\"Renderer\",\"padding\",\"onAdd\",\"map\",\"_container\",\"DomUtil\",\"getPane\",\"pane\",\"appendChild\",\"_ctx\",\"getContext\",\"onRemove\",\"remove\",\"getContainer\",\"getBounds\",\"_bounds\",\"_map\",\"_animatingZoom\",\"b\",\"container\",\"size\",\"getSize\",\"Browser\",\"retina\",\"setPosition\",\"min\",\"width\",\"height\",\"style\",\"scale\",\"translate\",\"Draw\",\"trackPointOptions\",\"isDraw\",\"useCanvas\",\"stroke\",\"color\",\"fill\",\"fillColor\",\"opacity\",\"radius\",\"trackLineOptions\",\"weight\",\"targetOptions\",\"useImg\",\"imgUrl\",\"toolTipOptions\",\"offset\",\"direction\",\"permanent\",\"_showTrackPoint\",\"_showTrackLine\",\"on\",\"_onmousemoveEvt\",\"_trackLayer\",\"addTo\",\"_trackLayerUpdate\",\"_canvas\",\"dem\",\"_bufferTracks\",\"_trackPointFeatureGroup\",\"featureGroup\",\"img\",\"Image\",\"onload\",\"onerror\",\"src\",\"_targetImg\",\"update\",\"trackpoints\",\"_drawTrack\",\"showTrackPoint\",\"hideTrackPoint\",\"showTrackLine\",\"hideTrackLine\",\"off\",\"hasLayer\",\"removeLayer\",\"_clearLayer\",\"element\",\"index\",\"e\",\"layerPoint\",\"leni\",\"tpoint\",\"_getLayerPoint\",\"_opentoolTip\",\"_tooltip\",\"cursor\",\"trackpoint\",\"latlng\",\"latLng\",\"tooltip\",\"setLatLng\",\"setContent\",\"_getTooltipText\",\"_drawTrackLine\",\"targetPoint\",\"_drawShipImage\",\"_drawShipCanvas\",\"_drawTrackPointsCanvas\",\"_drawTrackPointsSvg\",\"tp0\",\"save\",\"beginPath\",\"moveTo\",\"tpi\",\"lineTo\",\"globalAlpha\",\"strokeStyle\",\"lineWidth\",\"fillStyle\",\"restore\",\"latLngToLayerPoint\",\"arc\",\"cricleMarker\",\"circleMarker\",\"bindTooltip\",\"addLayer\",\"rotate\",\"w\",\"h\",\"dh\",\"closePath\",\"console\",\"log\",\"drawImage\",\"id\",\"targetobj\",\"content\",\"info\",\"join\",\"bounds\",\"clearRect\",\"clearLayers\",\"[object Object]\",\"TrackPlayBack\",\"data\",\"drawOptions\",\"_initTracks\",\"clock\",\"clockOptions\",\"dispose\",\"trackplayback\"],\"mappings\":\"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\"}","code":"!function(t,i){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=i(require(\"leaflet\"));else if(\"function\"==typeof define&&define.amd)define([\"leaflet\"],i);else{var e=\"object\"==typeof exports?i(require(\"leaflet\")):i(t.L);for(var s in e)(\"object\"==typeof exports?exports:t)[s]=e[s]}}(window,(function(t){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=1)}([function(i,e){i.exports=t},function(t,i,e){\"use strict\";e.r(i);var s=e(0),n=e.n(s);function r(t){return Array.isArray?Array.isArray(t):\"[object Array]\"===Object.prototype.toString.call(t)}const a=n.a.Class.extend({initialize:function(t=[],i){n.a.setOptions(this,i),t.forEach(t=>{t.isOrigin=!0}),this._trackPoints=t,this._timeTick={},this._update()},addTrackPoint:function(t){if(r(t))for(let i=0,e=t.length;i<e;i++)this.addTrackPoint(t[i]);this._addTrackPoint(t)},getTimes:function(){let t=[];for(let i=0,e=this._trackPoints.length;i<e;i++)t.push(this._trackPoints[i].time);return t},getStartTrackPoint:function(){return this._trackPoints[0]},getEndTrackPoint:function(){return this._trackPoints[this._trackPoints.length-1]},getTrackPointByTime:function(t){return this._trackPoints[this._timeTick[t]]},_getCalculateTrackPointByTime:function(t){let i=this.getTrackPointByTime(t),e=this.getStartTrackPoint(),s=this.getEndTrackPoint(),r=this.getTimes();if(t<e.time||t>s.time)return;let a,o=0,h=r.length-1;if(o===h)return i;for(;h-o!=1;)a=parseInt((o+h)/2),t>r[a]?o=a:h=a;let c=r[o],l=r[h],u=t,_=this.getTrackPointByTime(c),p=this.getTrackPointByTime(l);e=n.a.point(_.lng,_.lat),s=n.a.point(p.lng,p.lat);let f=e.distanceTo(s);if(f<=0)return i=p,i;let d=f/(l-c),k=(s.y-e.y)/f,m=(s.x-e.x)/f,T=d*(u-c),g=e.x+T*m,y=e.y+T*k,P=s.x>=e.x?180*(.5*Math.PI-Math.asin(k))/Math.PI:180*(1.5*Math.PI+Math.asin(k))/Math.PI;return i?void 0===i.dir&&(i.dir=P):i={lng:g,lat:y,dir:P,isOrigin:!1,time:t},i},getTrackPointsBeforeTime:function(t){let i=[];for(let e=0,s=this._trackPoints.length;e<s;e++)this._trackPoints[e].time<t&&i.push(this._trackPoints[e]);let e=this._getCalculateTrackPointByTime(t);return e&&i.push(e),i},_addTrackPoint:function(t){t.isOrigin=!0,this._trackPoints.push(t),this._update()},_update:function(){this._sortTrackPointsByTime(),this._updatetimeTick()},_sortTrackPointsByTime:function(){let t=this._trackPoints.length;for(let i=0;i<t;i++)for(let e=0;e<t-1-i;e++)if(this._trackPoints[e].time>this._trackPoints[e+1].time){let t=this._trackPoints[e+1];this._trackPoints[e+1]=this._trackPoints[e],this._trackPoints[e]=t}},_updatetimeTick:function(){this._timeTick={};for(let t=0,i=this._trackPoints.length;t<i;t++)this._timeTick[this._trackPoints[t].time]=t}}),o=n.a.Class.extend({initialize:function(t=[],i,e){n.a.setOptions(this,e),this._tracks=[],this.addTrack(t),this._draw=i,this._updateTime()},getMinTime:function(){return this._minTime},getMaxTime:function(){return this._maxTime},addTrack:function(t){if(r(t))for(let i=0,e=t.length;i<e;i++)this.addTrack(t[i]);else{if(!(t instanceof a))throw new Error(\"tracks must be an instance of `Track` or an array of `Track` instance!\");this._tracks.push(t),this._updateTime()}},drawTracksByTime:function(t){this._draw.clear();for(let i=0,e=this._tracks.length;i<e;i++){let e=this._tracks[i].getTrackPointsBeforeTime(t);e&&e.length&&this._draw.drawTrack(e)}},_updateTime:function(){this._minTime=this._tracks[0].getStartTrackPoint().time,this._maxTime=this._tracks[0].getEndTrackPoint().time;for(let t=0,i=this._tracks.length;t<i;t++){let i=this._tracks[t].getStartTrackPoint().time,e=this._tracks[t].getEndTrackPoint().time;i<this._minTime&&(this._minTime=i),e>this._maxTime&&(this._maxTime=e)}}}),h=n.a.Class.extend({includes:n.a.Mixin.Events,options:{speed:12,maxSpeed:65},initialize:function(t,i){n.a.setOptions(this,i),this._trackController=t,this._endTime=this._trackController.getMaxTime(),this._curTime=this._trackController.getMinTime(),this._speed=this.options.speed,this._maxSpeed=this.options.maxSpeed,this._intervalID=null,this._lastFpsUpdateTime=0},start:function(){this._intervalID||(this._intervalID=n.a.Util.requestAnimFrame(this._tick,this))},stop:function(){this._intervalID&&(n.a.Util.cancelAnimFrame(this._intervalID),this._intervalID=null,this._lastFpsUpdateTime=0)},rePlaying:function(){this.stop(),this._curTime=this._trackController.getMinTime(),this.start()},slowSpeed:function(){this._speed=this._speed<=1?this._speed:this._speed-1,this._intervalID&&(this.stop(),this.start())},quickSpeed:function(){this._speed=this._speed>=this._maxSpeed?this._speed:this._speed+1,this._intervalID&&(this.stop(),this.start())},getSpeed:function(){return this._speed},getCurTime:function(){return this._curTime},getStartTime:function(){return this._trackController.getMinTime()},getEndTime:function(){return this._trackController.getMaxTime()},isPlaying:function(){return!!this._intervalID},setCursor:function(t){this._curTime=t,this._trackController.drawTracksByTime(this._curTime),this.fire(\"tick\",{time:this._curTime})},setSpeed:function(t){this._speed=t,this._intervalID&&(this.stop(),this.start())},_caculatefpsTime:function(t){let i;return i=0===this._lastFpsUpdateTime?0:t-this._lastFpsUpdateTime,this._lastFpsUpdateTime=t,i/=1e3,i},_tick:function(){let t=+new Date,i=!1,e=this._caculatefpsTime(t)*Math.pow(2,this._speed-1);this._curTime+=e,this._curTime>=this._endTime&&(this._curTime=this._endTime,i=!0),this._trackController.drawTracksByTime(this._curTime),this.fire(\"tick\",{time:this._curTime}),i||(this._intervalID=n.a.Util.requestAnimFrame(this._tick,this))}}),c=n.a.Renderer.extend({initialize:function(t){n.a.Renderer.prototype.initialize.call(this,t),this.options.padding=.1},onAdd:function(t){this._container=n.a.DomUtil.create(\"canvas\",\"leaflet-zoom-animated\"),t.getPane(this.options.pane).appendChild(this._container),this._ctx=this._container.getContext(\"2d\"),this._update()},onRemove:function(t){n.a.DomUtil.remove(this._container)},getContainer:function(){return this._container},getBounds:function(){return this._bounds},_update:function(){if(!this._map._animatingZoom||!this._bounds){n.a.Renderer.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),s=n.a.Browser.retina?2:1;n.a.DomUtil.setPosition(i,t.min),i.width=s*e.x,i.height=s*e.y,i.style.width=e.x+\"px\",i.style.height=e.y+\"px\",n.a.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire(\"update\")}}}),l=n.a.Class.extend({trackPointOptions:{isDraw:!1,useCanvas:!0,stroke:!1,color:\"#ef0300\",fill:!0,fillColor:\"#ef0300\",opacity:.3,radius:4},trackLineOptions:{isDraw:!1,stroke:!0,color:\"#1C54E2\",weight:2,fill:!1,fillColor:\"#000\",opacity:.3},targetOptions:{useImg:!1,imgUrl:\"../../static/images/ship.png\",width:8,height:18,color:\"rgb(0 0 0 / 0%)\",fillColor:\"rgb(0 0 0 / 0%)\"},toolTipOptions:{offset:[0,0],direction:\"top\",permanent:!1},initialize:function(t,i){n.a.extend(this.trackPointOptions,i.trackPointOptions),n.a.extend(this.trackLineOptions,i.trackLineOptions),n.a.extend(this.targetOptions,i.targetOptions),n.a.extend(this.toolTipOptions,i.toolTipOptions),this._showTrackPoint=this.trackPointOptions.isDraw,this._showTrackLine=this.trackLineOptions.isDraw,this._map=t,this._map.on(\"mousemove\",this._onmousemoveEvt,this),this._trackLayer=(new c).addTo(t),this._trackLayer.on(\"update\",this._trackLayerUpdate,this),this._canvas=this._trackLayer.getContainer(),this._ctx=this._canvas.getContext(\"2d\"),this.dem=0,this._bufferTracks=[],this.trackPointOptions.useCanvas||(this._trackPointFeatureGroup=n.a.featureGroup([]).addTo(t));for(let t=1;t<8;t++){const i=new Image;i.onload=()=>{this[t]=i},i.onerror=()=>{throw new Error(\"img load error!\")},i.src=\"example/track-1.png\"}if(this.targetOptions.useImg){const t=new Image;t.onload=()=>{this._targetImg=t},t.onerror=()=>{throw new Error(\"img load error!\")},t.src=this.targetOptions.imgUrl}},update:function(){this._trackLayerUpdate()},drawTrack:function(t){this._bufferTracks.push(t),this._drawTrack(t)},showTrackPoint:function(){this._showTrackPoint=!0,this.update()},hideTrackPoint:function(){this._showTrackPoint=!1,this.update()},showTrackLine:function(){this._showTrackLine=!0,this.update()},hideTrackLine:function(){this._showTrackLine=!1,this.update()},remove:function(){this._bufferTracks=[],this._trackLayer.off(\"update\",this._trackLayerUpdate,this),this._map.off(\"mousemove\",this._onmousemoveEvt,this),this._map.hasLayer(this._trackLayer)&&this._map.removeLayer(this._trackLayer),this._map.hasLayer(this._trackPointFeatureGroup)&&this._map.removeLayer(this._trackPointFeatureGroup)},clear:function(){this._clearLayer(),this._bufferTracks=[]},_trackLayerUpdate:function(){this._bufferTracks.length&&(this._clearLayer(),this._bufferTracks.forEach(function(t,i){this._drawTrack(t)}.bind(this)))},_onmousemoveEvt:function(t){if(!this._showTrackPoint)return;let i=t.layerPoint;if(this._bufferTracks.length)for(let t=0,e=this._bufferTracks.length;t<e;t++)for(let e=0,s=this._bufferTracks[t].length;e<s;e++){let s=this._getLayerPoint(this._bufferTracks[t][e]);if(i.distanceTo(s)<=this.trackPointOptions.radius)return void this._opentoolTip(this._bufferTracks[t][e])}this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor=\"pointer\"},_opentoolTip:function(t){this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor=\"default\";let i=n.a.latLng(t.lat,t.lng),e=this._tooltip=n.a.tooltip(this.toolTipOptions);e.setLatLng(i),e.addTo(this._map),e.setContent(this._getTooltipText(t))},_drawTrack:function(t){this._showTrackLine&&this._drawTrackLine(t);let i=t[t.length-1];this.targetOptions.useImg&&this._targetImg?this._drawShipImage(i):this._drawShipCanvas(i),this._showTrackPoint&&(this.trackPointOptions.useCanvas?this._drawTrackPointsCanvas(t):this._drawTrackPointsSvg(t))},_drawTrackLine:function(t){let i=this.trackLineOptions,e=this._getLayerPoint(t[0]);this._ctx.save(),this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y);for(let i=1,e=t.length;i<e;i++){let e=this._getLayerPoint(t[i]);this._ctx.lineTo(e.x,e.y)}this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill()),this._ctx.restore()},_drawTrackPointsCanvas:function(t){let i=this.trackPointOptions;this._ctx.save();for(let e=0,s=t.length;e<s;e++)if(t[e].isOrigin){let s=n.a.latLng(t[e].lat,t[e].lng),r=i.radius,a=this._map.latLngToLayerPoint(s);this._ctx.beginPath(),this._ctx.arc(a.x,a.y,r,0,2*Math.PI,!1),this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill())}this._ctx.restore()},_drawTrackPointsSvg:function(t){for(let i=0,e=t.length;i<e;i++)if(t[i].isOrigin){let e=n.a.latLng(t[i].lat,t[i].lng),s=n.a.circleMarker(e,this.trackPointOptions);s.bindTooltip(this._getTooltipText(t[i]),this.toolTipOptions),this._trackPointFeatureGroup.addLayer(s)}},_drawShipCanvas:function(t){let i=this._getLayerPoint(t),e=t.dir||0,s=this.targetOptions.width,n=this.targetOptions.height,r=n/3;this._ctx.save(),this._ctx.fillStyle=this.targetOptions.fillColor,this._ctx.strokeStyle=this.targetOptions.color,this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.beginPath(),this._ctx.moveTo(0,0-n/2),this._ctx.lineTo(0-s/2,0-n/2+r),this._ctx.lineTo(0-s/2,0+n/2),this._ctx.lineTo(0+s/2,0+n/2),this._ctx.lineTo(0+s/2,0-n/2+r),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},_drawShipImage:function(t){console.log(t,\"trackpoint\"),1==t.isOrigin&&this.dem++,console.log(this.dem,\"myDem\");let i=this._getLayerPoint(t),e=t.dir||0,s=this.targetOptions.width,n=this.targetOptions.height,r=s/2,a=n/2;this._ctx.save(),this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.drawImage(this[id],0-r,0-a,s,n),this._ctx.restore()},_getTooltipText:function(t){let i=[];if(i.push('<table class=\"border-table-tooltip\">'),t.info&&t.info.length)for(let e=0,s=t.info.length;e<s;e++)i.push(\"<tr>\"),i.push(\"<td>\"+t.info[e].key+\"</td>\"),i.push(\"<td>\"+t.info[e].value+\"</td>\"),i.push(\"</tr>\");return i.push(\"</table>\"),i=i.join(\"\"),i},_clearLayer:function(){let t=this._trackLayer.getBounds();if(t){let i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);this._map.hasLayer(this._trackPointFeatureGroup)&&this._trackPointFeatureGroup.clearLayers()},_getLayerPoint(t){return this._map.latLngToLayerPoint(n.a.latLng(t.lat,t.lng))}}),u=n.a.Class.extend({includes:n.a.Mixin.Events,initialize:function(t,i,e={}){let s={trackPointOptions:e.trackPointOptions,trackLineOptions:e.trackLineOptions,targetOptions:e.targetOptions,toolTipOptions:e.toolTipOptions};this.tracks=this._initTracks(t),this.draw=new l(i,s),this.trackController=new o(this.tracks,this.draw),this.clock=new h(this.trackController,e.clockOptions),this.clock.on(\"tick\",this._tick,this)},start:function(){return this.clock.start(),this},stop:function(){return this.clock.stop(),this},rePlaying:function(){return this.clock.rePlaying(),this},slowSpeed:function(){return this.clock.slowSpeed(),this},quickSpeed:function(){return this.clock.quickSpeed(),this},getSpeed:function(){return this.clock.getSpeed()},getCurTime:function(){return this.clock.getCurTime()},getStartTime:function(){return this.clock.getStartTime()},getEndTime:function(){return this.clock.getEndTime()},isPlaying:function(){return this.clock.isPlaying()},setCursor:function(t){return this.clock.setCursor(t),this},setSpeed:function(t){return this.clock.setSpeed(t),this},showTrackPoint:function(){return this.draw.showTrackPoint(),this},hideTrackPoint:function(){return this.draw.hideTrackPoint(),this},showTrackLine:function(){return this.draw.showTrackLine(),this},hideTrackLine:function(){return this.draw.hideTrackLine(),this},dispose:function(){this.clock.off(\"tick\",this._tick),this.draw.remove(),this.tracks=null,this.draw=null,this.trackController=null,this.clock=null},_tick:function(t){this.fire(\"tick\",t)},_initTracks:function(t){let i=[];if(r(t))if(r(t[0]))for(let e=0,s=t.length;e<s;e++)i.push(new a(t[e]));else i.push(new a(t));return i}});n.a.TrackPlayBack=u,n.a.trackplayback=function(t,i,e){return new u(t,i,e)}}])}));","extractedComments":[]}