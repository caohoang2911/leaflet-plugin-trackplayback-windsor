{"map":"{\"version\":3,\"sources\":[\"leaflet.trackplayback.js\"],\"names\":[\"root\",\"factory\",\"exports\",\"module\",\"require\",\"define\",\"amd\",\"a\",\"i\",\"window\",\"__WEBPACK_EXTERNAL_MODULE__0__\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"__webpack_exports__\",\"external_root_L_commonjs_leaflet_commonjs2_leaflet_amd_leaflet_\",\"external_root_L_commonjs_leaflet_commonjs2_leaflet_amd_leaflet_default\",\"isArray\",\"arr\",\"Array\",\"toString\",\"Track\",\"Class\",\"extend\",\"initialize\",\"trackData\",\"options\",\"setOptions\",\"this\",\"forEach\",\"item\",\"isOrigin\",\"_trackPoints\",\"_timeTick\",\"_update\",\"addTrackPoint\",\"trackPoint\",\"len\",\"length\",\"_addTrackPoint\",\"getTimes\",\"times\",\"push\",\"time\",\"getStartTrackPoint\",\"getEndTrackPoint\",\"getTrackPointByTime\",\"_getCalculateTrackPointByTime\",\"endpoint\",\"startPt\",\"endPt\",\"left\",\"right\",\"parseInt\",\"t0\",\"t1\",\"p0\",\"p1\",\"point\",\"lng\",\"lat\",\"distanceTo\",\"v\",\"sinx\",\"y\",\"cosx\",\"x\",\"step\",\"dir\",\"Math\",\"PI\",\"asin\",\"undefined\",\"getTrackPointsBeforeTime\",\"tpoints\",\"_sortTrackPointsByTime\",\"_updatetimeTick\",\"j\",\"tmp\",\"TrackController\",\"tracks\",\"draw\",\"_tracks\",\"addTrack\",\"_draw\",\"_updateTime\",\"getMinTime\",\"_minTime\",\"getMaxTime\",\"_maxTime\",\"track\",\"Error\",\"drawTracksByTime\",\"clear\",\"tps\",\"drawTrack\",\"stime\",\"etime\",\"Clock\",\"includes\",\"Mixin\",\"Events\",\"speed\",\"maxSpeed\",\"trackController\",\"_trackController\",\"_endTime\",\"_curTime\",\"_speed\",\"_maxSpeed\",\"_intervalID\",\"_lastFpsUpdateTime\",\"start\",\"Util\",\"requestAnimFrame\",\"_tick\",\"stop\",\"cancelAnimFrame\",\"rePlaying\",\"slowSpeed\",\"quickSpeed\",\"getSpeed\",\"getCurTime\",\"getStartTime\",\"getEndTime\",\"isPlaying\",\"setCursor\",\"fire\",\"setSpeed\",\"_caculatefpsTime\",\"now\",\"Date\",\"isPause\",\"stepTime\",\"pow\",\"TrackLayer\",\"Renderer\",\"padding\",\"onAdd\",\"map\",\"_container\",\"DomUtil\",\"getPane\",\"pane\",\"appendChild\",\"_ctx\",\"getContext\",\"onRemove\",\"remove\",\"getContainer\",\"getBounds\",\"_bounds\",\"_map\",\"_animatingZoom\",\"b\",\"container\",\"size\",\"getSize\",\"Browser\",\"retina\",\"setPosition\",\"min\",\"width\",\"height\",\"style\",\"scale\",\"translate\",\"arrTarget\",\"Draw\",\"trackPointOptions\",\"isDraw\",\"useCanvas\",\"stroke\",\"color\",\"fill\",\"fillColor\",\"opacity\",\"radius\",\"trackLineOptions\",\"weight\",\"targetOptions\",\"useImg\",\"flashDrag\",\"arrImage\",\"imgUrl\",\"toolTipOptions\",\"offset\",\"direction\",\"permanent\",\"_showTrackPoint\",\"_showTrackLine\",\"on\",\"_onmousemoveEvt\",\"_trackLayer\",\"addTo\",\"_trackLayerUpdate\",\"_canvas\",\"dem\",\"_bufferTracks\",\"_trackPointFeatureGroup\",\"featureGroup\",\"promises\",\"promise\",\"Promise\",\"resolve\",\"img\",\"Image\",\"onload\",\"onerror\",\"src\",\"all\",\"then\",\"_targetImg\",\"update\",\"trackpoints\",\"_drawTrack\",\"showTrackPoint\",\"hideTrackPoint\",\"showTrackLine\",\"hideTrackLine\",\"off\",\"hasLayer\",\"removeLayer\",\"_clearLayer\",\"element\",\"index\",\"e\",\"layerPoint\",\"leni\",\"tpoint\",\"_getLayerPoint\",\"_opentoolTip\",\"_tooltip\",\"cursor\",\"trackpoint\",\"latlng\",\"latLng\",\"tooltip\",\"setLatLng\",\"setContent\",\"_getTooltipText\",\"_drawTrackLine\",\"targetPoint\",\"_drawShipImage\",\"_drawShipCanvas\",\"_drawTrackPointsCanvas\",\"_drawTrackPointsSvg\",\"tp0\",\"save\",\"beginPath\",\"moveTo\",\"tpi\",\"lineTo\",\"globalAlpha\",\"strokeStyle\",\"lineWidth\",\"fillStyle\",\"restore\",\"latLngToLayerPoint\",\"arc\",\"cricleMarker\",\"circleMarker\",\"bindTooltip\",\"addLayer\",\"rotate\",\"drawImage\",\"vt\",\"targetobj\",\"content\",\"info\",\"join\",\"bounds\",\"clearRect\",\"clearLayers\",\"[object Object]\",\"TrackPlayBack\",\"data\",\"drawOptions\",\"_initTracks\",\"clock\",\"clockOptions\",\"dispose\",\"trackplayback\"],\"mappings\":\"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\"}","code":"!function(t,i){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=i(require(\"leaflet\"));else if(\"function\"==typeof define&&define.amd)define([\"leaflet\"],i);else{var e=\"object\"==typeof exports?i(require(\"leaflet\")):i(t.L);for(var s in e)(\"object\"==typeof exports?exports:t)[s]=e[s]}}(window,(function(t){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var r in t)e.d(s,r,function(i){return t[i]}.bind(null,r));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=1)}([function(i,e){i.exports=t},function(t,i,e){\"use strict\";e.r(i);var s=e(0),r=e.n(s);function n(t){return Array.isArray?Array.isArray(t):\"[object Array]\"===Object.prototype.toString.call(t)}const a=r.a.Class.extend({initialize:function(t=[],i){r.a.setOptions(this,i),t.forEach(t=>{t.isOrigin=!0}),this._trackPoints=t,this._timeTick={},this._update()},addTrackPoint:function(t){if(n(t))for(let i=0,e=t.length;i<e;i++)this.addTrackPoint(t[i]);this._addTrackPoint(t)},getTimes:function(){let t=[];for(let i=0,e=this._trackPoints.length;i<e;i++)t.push(this._trackPoints[i].time);return t},getStartTrackPoint:function(){return this._trackPoints[0]},getEndTrackPoint:function(){return this._trackPoints[this._trackPoints.length-1]},getTrackPointByTime:function(t){return this._trackPoints[this._timeTick[t]]},_getCalculateTrackPointByTime:function(t){let i=this.getTrackPointByTime(t),e=this.getStartTrackPoint(),s=this.getEndTrackPoint(),n=this.getTimes();if(t<e.time||t>s.time)return;let a,o=0,h=n.length-1;if(o===h)return i;for(;h-o!=1;)a=parseInt((o+h)/2),t>n[a]?o=a:h=a;let c=n[o],l=n[h],u=t,_=this.getTrackPointByTime(c),p=this.getTrackPointByTime(l);e=r.a.point(_.lng,_.lat),s=r.a.point(p.lng,p.lat);let f=e.distanceTo(s);if(f<=0)return i=p,i;let d=f/(l-c),k=(s.y-e.y)/f,m=(s.x-e.x)/f,T=d*(u-c),g=e.x+T*m,P=e.y+T*k,y=s.x>=e.x?180*(.5*Math.PI-Math.asin(k))/Math.PI:180*(1.5*Math.PI+Math.asin(k))/Math.PI;return i?void 0===i.dir&&(i.dir=y):i={lng:g,lat:P,dir:y,isOrigin:!1,time:t},i},getTrackPointsBeforeTime:function(t){let i=[];for(let e=0,s=this._trackPoints.length;e<s;e++)this._trackPoints[e].time<t&&i.push(this._trackPoints[e]);let e=this._getCalculateTrackPointByTime(t);return e&&i.push(e),i},_addTrackPoint:function(t){t.isOrigin=!0,this._trackPoints.push(t),this._update()},_update:function(){this._sortTrackPointsByTime(),this._updatetimeTick()},_sortTrackPointsByTime:function(){let t=this._trackPoints.length;for(let i=0;i<t;i++)for(let e=0;e<t-1-i;e++)if(this._trackPoints[e].time>this._trackPoints[e+1].time){let t=this._trackPoints[e+1];this._trackPoints[e+1]=this._trackPoints[e],this._trackPoints[e]=t}},_updatetimeTick:function(){this._timeTick={};for(let t=0,i=this._trackPoints.length;t<i;t++)this._timeTick[this._trackPoints[t].time]=t}}),o=r.a.Class.extend({initialize:function(t=[],i,e){r.a.setOptions(this,e),this._tracks=[],this.addTrack(t),this._draw=i,this._updateTime()},getMinTime:function(){return this._minTime},getMaxTime:function(){return this._maxTime},addTrack:function(t){if(n(t))for(let i=0,e=t.length;i<e;i++)this.addTrack(t[i]);else{if(!(t instanceof a))throw new Error(\"tracks must be an instance of `Track` or an array of `Track` instance!\");this._tracks.push(t),this._updateTime()}},drawTracksByTime:function(t){this._draw.clear();for(let i=0,e=this._tracks.length;i<e;i++){let e=this._tracks[i].getTrackPointsBeforeTime(t);e&&e.length&&this._draw.drawTrack(e)}},_updateTime:function(){this._minTime=this._tracks[0].getStartTrackPoint().time,this._maxTime=this._tracks[0].getEndTrackPoint().time;for(let t=0,i=this._tracks.length;t<i;t++){let i=this._tracks[t].getStartTrackPoint().time,e=this._tracks[t].getEndTrackPoint().time;i<this._minTime&&(this._minTime=i),e>this._maxTime&&(this._maxTime=e)}}}),h=r.a.Class.extend({includes:r.a.Mixin.Events,options:{speed:12,maxSpeed:65},initialize:function(t,i){r.a.setOptions(this,i),this._trackController=t,this._endTime=this._trackController.getMaxTime(),this._curTime=this._trackController.getMinTime(),this._speed=this.options.speed,this._maxSpeed=this.options.maxSpeed,this._intervalID=null,this._lastFpsUpdateTime=0},start:function(){this._intervalID||(this._intervalID=r.a.Util.requestAnimFrame(this._tick,this))},stop:function(){this._intervalID&&(r.a.Util.cancelAnimFrame(this._intervalID),this._intervalID=null,this._lastFpsUpdateTime=0)},rePlaying:function(){this.stop(),this._curTime=this._trackController.getMinTime(),this.start()},slowSpeed:function(){this._speed=this._speed<=1?this._speed:this._speed-1,this._intervalID&&(this.stop(),this.start())},quickSpeed:function(){this._speed=this._speed>=this._maxSpeed?this._speed:this._speed+1,this._intervalID&&(this.stop(),this.start())},getSpeed:function(){return this._speed},getCurTime:function(){return this._curTime},getStartTime:function(){return this._trackController.getMinTime()},getEndTime:function(){return this._trackController.getMaxTime()},isPlaying:function(){return!!this._intervalID},setCursor:function(t){this._curTime=t,this._trackController.drawTracksByTime(this._curTime),this.fire(\"tick\",{time:this._curTime})},setSpeed:function(t){this._speed=t,this._intervalID&&(this.stop(),this.start())},_caculatefpsTime:function(t){let i;return i=0===this._lastFpsUpdateTime?0:t-this._lastFpsUpdateTime,this._lastFpsUpdateTime=t,i/=1e3,i},_tick:function(){let t=+new Date,i=!1,e=this._caculatefpsTime(t)*Math.pow(2,this._speed-1);this._curTime+=e,this._curTime>=this._endTime&&(this._curTime=this._endTime,i=!0),this._trackController.drawTracksByTime(this._curTime),this.fire(\"tick\",{time:this._curTime}),i||(this._intervalID=r.a.Util.requestAnimFrame(this._tick,this))}}),c=r.a.Renderer.extend({initialize:function(t){r.a.Renderer.prototype.initialize.call(this,t),this.options.padding=.1},onAdd:function(t){this._container=r.a.DomUtil.create(\"canvas\",\"leaflet-zoom-animated\"),t.getPane(this.options.pane).appendChild(this._container),this._ctx=this._container.getContext(\"2d\"),this._update()},onRemove:function(t){r.a.DomUtil.remove(this._container)},getContainer:function(){return this._container},getBounds:function(){return this._bounds},_update:function(){if(!this._map._animatingZoom||!this._bounds){r.a.Renderer.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),s=r.a.Browser.retina?2:1;r.a.DomUtil.setPosition(i,t.min),i.width=s*e.x,i.height=s*e.y,i.style.width=e.x+\"px\",i.style.height=e.y+\"px\",r.a.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire(\"update\")}}});var l=[];const u=r.a.Class.extend({trackPointOptions:{isDraw:!1,useCanvas:!0,stroke:!1,color:\"#ef0300\",fill:!0,fillColor:\"#ef0300\",opacity:.3,radius:4},trackLineOptions:{isDraw:!1,stroke:!0,color:\"#1C54E2\",weight:2,fill:!1,fillColor:\"#000\",opacity:.3},targetOptions:{useImg:!1,flashDrag:!1,arrImage:[],imgUrl:\"../../static/images/ship.png\",width:8,height:18,color:\"rgb(0 0 0 / 0%)\",fillColor:\"rgb(0 0 0 / 0%)\"},toolTipOptions:{offset:[0,0],direction:\"top\",permanent:!1},initialize:function(t,i){if(r.a.extend(this.trackPointOptions,i.trackPointOptions),r.a.extend(this.trackLineOptions,i.trackLineOptions),r.a.extend(this.targetOptions,i.targetOptions),r.a.extend(this.toolTipOptions,i.toolTipOptions),this._showTrackPoint=this.trackPointOptions.isDraw,this._showTrackLine=this.trackLineOptions.isDraw,this._map=t,this._map.on(\"mousemove\",this._onmousemoveEvt,this),this._trackLayer=(new c).addTo(t),this._trackLayer.on(\"update\",this._trackLayerUpdate,this),this._canvas=this._trackLayer.getContainer(),this._ctx=this._canvas.getContext(\"2d\"),this.dem=0,this._bufferTracks=[],this.trackPointOptions.useCanvas||(this._trackPointFeatureGroup=r.a.featureGroup([]).addTo(t)),0==l.length){let t=[];for(let i=0;i<this.targetOptions.arrImage.length;i++){const e=new Promise(t=>{const e=new Image;e.onload=()=>{t(e)},e.onerror=()=>{throw new Error(\"img load error!\")},e.src=this.targetOptions.arrImage[i]});t.push(e)}Promise.all(t).then(t=>{l=[...t]})}if(this.targetOptions.useImg){const t=new Image;t.onload=()=>{this._targetImg=t},t.onerror=()=>{throw new Error(\"img load error!\")},t.src=this.targetOptions.imgUrl}},update:function(){this._trackLayerUpdate()},drawTrack:function(t){this._bufferTracks.push(t),this._drawTrack(t)},showTrackPoint:function(){this._showTrackPoint=!0,this.update()},hideTrackPoint:function(){this._showTrackPoint=!1,this.update()},showTrackLine:function(){this._showTrackLine=!0,this.update()},hideTrackLine:function(){this._showTrackLine=!1,this.update()},remove:function(){this._bufferTracks=[],this._trackLayer.off(\"update\",this._trackLayerUpdate,this),this._map.off(\"mousemove\",this._onmousemoveEvt,this),this._map.hasLayer(this._trackLayer)&&this._map.removeLayer(this._trackLayer),this._map.hasLayer(this._trackPointFeatureGroup)&&this._map.removeLayer(this._trackPointFeatureGroup)},clear:function(){this._clearLayer(),this._bufferTracks=[]},_trackLayerUpdate:function(){this._bufferTracks.length&&(this._clearLayer(),this._bufferTracks.forEach(function(t,i){this._drawTrack(t)}.bind(this)))},_onmousemoveEvt:function(t){if(!this._showTrackPoint)return;let i=t.layerPoint;if(this._bufferTracks.length)for(let t=0,e=this._bufferTracks.length;t<e;t++)for(let e=0,s=this._bufferTracks[t].length;e<s;e++){let s=this._getLayerPoint(this._bufferTracks[t][e]);if(i.distanceTo(s)<=this.trackPointOptions.radius)return void this._opentoolTip(this._bufferTracks[t][e])}this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor=\"pointer\"},_opentoolTip:function(t){this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor=\"default\";let i=r.a.latLng(t.lat,t.lng),e=this._tooltip=r.a.tooltip(this.toolTipOptions);e.setLatLng(i),e.addTo(this._map),e.setContent(this._getTooltipText(t))},_drawTrack:function(t){this._showTrackLine&&this._drawTrackLine(t);let i=t[t.length-1];this.targetOptions.useImg&&this._targetImg?this._drawShipImage(i,t):this._drawShipCanvas(i),this._showTrackPoint&&(this.trackPointOptions.useCanvas?this._drawTrackPointsCanvas(t):this._drawTrackPointsSvg(t))},_drawTrackLine:function(t){let i=this.trackLineOptions,e=this._getLayerPoint(t[0]);this._ctx.save(),this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y);for(let i=1,e=t.length;i<e;i++){let e=this._getLayerPoint(t[i]);this._ctx.lineTo(e.x,e.y)}this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill()),this._ctx.restore()},_drawTrackPointsCanvas:function(t){let i=this.trackPointOptions;this._ctx.save();for(let e=0,s=t.length;e<s;e++)if(t[e].isOrigin){let s=r.a.latLng(t[e].lat,t[e].lng),n=i.radius,a=this._map.latLngToLayerPoint(s);this._ctx.beginPath(),this._ctx.arc(a.x,a.y,n,0,2*Math.PI,!1),this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill())}this._ctx.restore()},_drawTrackPointsSvg:function(t){for(let i=0,e=t.length;i<e;i++)if(t[i].isOrigin){let e=r.a.latLng(t[i].lat,t[i].lng),s=r.a.circleMarker(e,this.trackPointOptions);s.bindTooltip(this._getTooltipText(t[i]),this.toolTipOptions),this._trackPointFeatureGroup.addLayer(s)}},_drawShipCanvas:function(t){},_drawShipImage:function(t,i){if(!this.targetOptions.flashDrag){1==t.isOrigin&&this.dem++;let e=this._getLayerPoint(t),s=t.dir||0,r=this.targetOptions.width,n=this.targetOptions.height,a={x:r/2,y:n/2};this._ctx.save(),this._ctx.translate(e.x,e.y),this._ctx.rotate(Math.PI/180*s),this._ctx.drawImage(l[i[0].vt],0-a.x,0-a.y,r,n),this._ctx.restore()}},_getTooltipText:function(t){let i=[];if(i.push('<table class=\"border-table-tooltip\">'),t.info&&t.info.length)for(let e=0,s=t.info.length;e<s;e++)i.push(\"<tr>\"),i.push(\"<td>\"+t.info[e].key+\"</td>\"),i.push(\"<td>\"+t.info[e].value+\"</td>\"),i.push(\"</tr>\");return i.push(\"</table>\"),i=i.join(\"\"),i},_clearLayer:function(){let t=this._trackLayer.getBounds();if(t){let i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);this._map.hasLayer(this._trackPointFeatureGroup)&&this._trackPointFeatureGroup.clearLayers()},_getLayerPoint(t){return this._map.latLngToLayerPoint(r.a.latLng(t.lat,t.lng))}}),_=r.a.Class.extend({includes:r.a.Mixin.Events,initialize:function(t,i,e={}){let s={trackPointOptions:e.trackPointOptions,trackLineOptions:e.trackLineOptions,targetOptions:e.targetOptions,toolTipOptions:e.toolTipOptions};this.tracks=this._initTracks(t),this.draw=new u(i,s),this.trackController=new o(this.tracks,this.draw),this.clock=new h(this.trackController,e.clockOptions),this.clock.on(\"tick\",this._tick,this)},start:function(){return this.clock.start(),this},stop:function(){return this.clock.stop(),this},rePlaying:function(){return this.clock.rePlaying(),this},slowSpeed:function(){return this.clock.slowSpeed(),this},quickSpeed:function(){return this.clock.quickSpeed(),this},getSpeed:function(){return this.clock.getSpeed()},getCurTime:function(){return this.clock.getCurTime()},getStartTime:function(){return this.clock.getStartTime()},getEndTime:function(){return this.clock.getEndTime()},isPlaying:function(){return this.clock.isPlaying()},setCursor:function(t){return this.clock.setCursor(t),this},setSpeed:function(t){return this.clock.setSpeed(t),this},showTrackPoint:function(){return this.draw.showTrackPoint(),this},hideTrackPoint:function(){return this.draw.hideTrackPoint(),this},showTrackLine:function(){return this.draw.showTrackLine(),this},hideTrackLine:function(){return this.draw.hideTrackLine(),this},dispose:function(){this.clock.off(\"tick\",this._tick),this.draw.remove(),this.tracks=null,this.draw=null,this.trackController=null,this.clock=null},_tick:function(t){this.fire(\"tick\",t)},_initTracks:function(t){let i=[];if(n(t))if(n(t[0]))for(let e=0,s=t.length;e<s;e++)i.push(new a(t[e]));else i.push(new a(t));return i}});r.a.TrackPlayBack=_,r.a.trackplayback=function(t,i,e){return new _(t,i,e)}}])}));","extractedComments":[]}