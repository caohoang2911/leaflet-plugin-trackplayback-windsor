{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external {\"root\":\"L\",\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\"}","webpack:///./src/leaflet.trackplayback/util.js","webpack:///./src/leaflet.trackplayback/track.js","webpack:///./src/leaflet.trackplayback/trackcontroller.js","webpack:///./src/leaflet.trackplayback/clock.js","webpack:///./src/leaflet.trackplayback/tracklayer.js","webpack:///./src/leaflet.trackplayback/draw.js","webpack:///./src/leaflet.trackplayback/trackplayback.js","webpack:///./src/leaflet.trackplayback/index.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","arr","Array","toString","Track","Class","extend","initialize","trackData","options","setOptions","this","forEach","item","isOrigin","_trackPoints","_timeTick","_update","addTrackPoint","trackPoint","len","length","_addTrackPoint","getTimes","times","push","time","getStartTrackPoint","getEndTrackPoint","getTrackPointByTime","_getCalculateTrackPointByTime","endpoint","startPt","endPt","left","right","parseInt","t0","t1","p0","p1","point","lng","lat","distanceTo","v","sinx","y","cosx","x","step","dir","Math","PI","asin","undefined","getTrackPointsBeforeTime","tpoints","_sortTrackPointsByTime","_updatetimeTick","j","tmp","TrackController","tracks","draw","_tracks","addTrack","_draw","_updateTime","getMinTime","_minTime","getMaxTime","_maxTime","track","Error","drawTracksByTime","clear","tps","drawTrack","stime","etime","Clock","includes","Mixin","Events","speed","maxSpeed","trackController","_trackController","_endTime","_curTime","_speed","_maxSpeed","_intervalID","_lastFpsUpdateTime","start","Util","requestAnimFrame","_tick","stop","cancelAnimFrame","rePlaying","slowSpeed","quickSpeed","getSpeed","getCurTime","getStartTime","getEndTime","isPlaying","setCursor","fire","setSpeed","_caculatefpsTime","now","Date","isPause","stepTime","pow","TrackLayer","Renderer","padding","onAdd","map","_container","DomUtil","getPane","pane","appendChild","_ctx","getContext","onRemove","remove","getContainer","getBounds","_bounds","_map","_animatingZoom","b","container","size","getSize","Browser","retina","setPosition","min","width","height","style","scale","translate","arrTarget","Draw","trackPointOptions","isDraw","useCanvas","stroke","color","fill","fillColor","opacity","radius","trackLineOptions","weight","targetOptions","useImg","flashDrag","arrImage","imgUrl","toolTipOptions","offset","direction","permanent","_showTrackPoint","_showTrackLine","on","_onmousemoveEvt","_trackLayer","addTo","_trackLayerUpdate","_canvas","dem","_bufferTracks","_trackPointFeatureGroup","featureGroup","promises","promise","Promise","resolve","img","Image","onload","onerror","src","all","then","_targetImg","update","trackpoints","_drawTrack","showTrackPoint","hideTrackPoint","showTrackLine","hideTrackLine","off","hasLayer","removeLayer","_clearLayer","element","index","e","layerPoint","leni","tpoint","_getLayerPoint","_opentoolTip","_tooltip","cursor","trackpoint","latlng","latLng","tooltip","setLatLng","setContent","_getTooltipText","_drawTrackLine","targetPoint","_drawShipImage","_drawShipCanvas","_drawTrackPointsCanvas","_drawTrackPointsSvg","tp0","save","beginPath","moveTo","tpi","lineTo","globalAlpha","strokeStyle","lineWidth","fillStyle","restore","latLngToLayerPoint","arc","cricleMarker","circleMarker","bindTooltip","addLayer","rotate","drawImage","vt","targetobj","content","info","join","bounds","clearRect","clearLayers","TrackPlayBack","data","drawOptions","_initTracks","clock","clockOptions","dispose","trackplayback"],"mappings":"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","file":"leaflet.trackplayback.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"leaflet\")) : factory(root[\"L\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export function isArray (arr) {\r\n  return Array.isArray ? Array.isArray(arr) : Object.prototype.toString.call(arr) === '[object Array]'\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  isArray\r\n} from './util'\r\n\r\n/**\r\n * 轨迹类\r\n */\r\nexport const Track = L.Class.extend({\r\n\r\n  initialize: function (trackData = [], options) {\r\n    L.setOptions(this, options)\r\n\r\n    trackData.forEach(item => {\r\n      // 添加 isOrigin 字段用来标识是否是原始采样点，与插值点区分开\r\n      item.isOrigin = true\r\n    })\r\n    this._trackPoints = trackData\r\n    this._timeTick = {}\r\n    this._update()\r\n  },\r\n\r\n  addTrackPoint: function (trackPoint) {\r\n    if (isArray(trackPoint)) {\r\n      for (let i = 0, len = trackPoint.length; i < len; i++) {\r\n        this.addTrackPoint(trackPoint[i])\r\n      }\r\n    }\r\n    this._addTrackPoint(trackPoint)\r\n  },\r\n\r\n  getTimes: function () {\r\n    let times = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      times.push(this._trackPoints[i].time)\r\n    }\r\n    return times\r\n  },\r\n\r\n  getStartTrackPoint: function () {\r\n    return this._trackPoints[0]\r\n  },\r\n\r\n  getEndTrackPoint: function () {\r\n    return this._trackPoints[this._trackPoints.length - 1]\r\n  },\r\n\r\n  getTrackPointByTime: function (time) {\r\n    return this._trackPoints[this._timeTick[time]]\r\n  },\r\n\r\n  _getCalculateTrackPointByTime: function (time) {\r\n    // 先判断最后一个点是否为原始点\r\n    let endpoint = this.getTrackPointByTime(time)\r\n    let startPt = this.getStartTrackPoint()\r\n    let endPt = this.getEndTrackPoint()\r\n    let times = this.getTimes()\r\n    if (time < startPt.time || time > endPt.time) return\r\n    let left = 0\r\n    let right = times.length - 1\r\n    let n\r\n    // 处理只有一个点情况\r\n    if (left === right) {\r\n      return endpoint\r\n    }\r\n    // 通过【二分查找】法查出当前时间所在的时间区间\r\n    while (right - left !== 1) {\r\n      n = parseInt((left + right) / 2)\r\n      if (time > times[n]) left = n\r\n      else right = n\r\n    }\r\n\r\n    let t0 = times[left]\r\n    let t1 = times[right]\r\n    let t = time\r\n    let p0 = this.getTrackPointByTime(t0)\r\n    let p1 = this.getTrackPointByTime(t1)\r\n    startPt = L.point(p0.lng, p0.lat)\r\n    endPt = L.point(p1.lng, p1.lat)\r\n    let s = startPt.distanceTo(endPt)\r\n    // 不同时间在同一个点情形\r\n    if (s <= 0) {\r\n      endpoint = p1\r\n      return endpoint\r\n    }\r\n    // 假设目标在两点间做匀速直线运动\r\n    // 求解速度向量，并计算时间 t 目标所在位置\r\n    let v = s / (t1 - t0)\r\n    let sinx = (endPt.y - startPt.y) / s\r\n    let cosx = (endPt.x - startPt.x) / s\r\n    let step = v * (t - t0)\r\n    let x = startPt.x + step * cosx\r\n    let y = startPt.y + step * sinx\r\n    // 求目标的运动方向，0-360度\r\n    let dir = endPt.x >= startPt.x ? (Math.PI * 0.5 - Math.asin(sinx)) * 180 / Math.PI : (Math.PI * 1.5 + Math.asin(sinx)) * 180 / Math.PI\r\n\r\n    if (endpoint) {\r\n      if (endpoint.dir === undefined) {\r\n        endpoint.dir = dir\r\n      }\r\n    } else {\r\n      endpoint = {\r\n        lng: x,\r\n        lat: y,\r\n        dir: dir,\r\n        isOrigin: false,\r\n        time: time\r\n      }\r\n    }\r\n    return endpoint\r\n  },\r\n\r\n  // 获取某个时间点之前走过的轨迹\r\n  getTrackPointsBeforeTime: function (time) {\r\n    let tpoints = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      if (this._trackPoints[i].time < time) {\r\n        tpoints.push(this._trackPoints[i])\r\n      }\r\n    }\r\n    // 获取最后一个点，根据时间线性插值而来\r\n    let endPt = this._getCalculateTrackPointByTime(time)\r\n    if (endPt) {\r\n      tpoints.push(endPt)\r\n    }\r\n    return tpoints\r\n  },\r\n\r\n  _addTrackPoint: function (trackPoint) {\r\n    trackPoint.isOrigin = true\r\n    this._trackPoints.push(trackPoint)\r\n    this._update()\r\n  },\r\n\r\n  _update: function () {\r\n    this._sortTrackPointsByTime()\r\n    this._updatetimeTick()\r\n  },\r\n\r\n  // 轨迹点按时间排序 【冒泡排序】\r\n  _sortTrackPointsByTime: function () {\r\n    let len = this._trackPoints.length\r\n    for (let i = 0; i < len; i++) {\r\n      for (let j = 0; j < len - 1 - i; j++) {\r\n        if (this._trackPoints[j].time > this._trackPoints[j + 1].time) {\r\n          let tmp = this._trackPoints[j + 1]\r\n          this._trackPoints[j + 1] = this._trackPoints[j]\r\n          this._trackPoints[j] = tmp\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // 为轨迹点建立时间索引，优化查找性能\r\n  _updatetimeTick: function () {\r\n    this._timeTick = {}\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      this._timeTick[this._trackPoints[i].time] = i\r\n    }\r\n  }\r\n})\r\n\r\nexport const track = function (trackData, options) {\r\n  return new Track(trackData, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  isArray\r\n} from './util'\r\nimport {\r\n  Track\r\n} from './track'\r\n\r\n/**\r\n * 控制器类\r\n * 控制轨迹和绘制\r\n */\r\nexport const TrackController = L.Class.extend({\r\n\r\n  initialize: function (tracks = [], draw, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._tracks = []\r\n    this.addTrack(tracks)\r\n\r\n    this._draw = draw\r\n\r\n    this._updateTime()\r\n  },\r\n\r\n  getMinTime: function () {\r\n    return this._minTime\r\n  },\r\n\r\n  getMaxTime: function () {\r\n    return this._maxTime\r\n  },\r\n\r\n  addTrack: function (track) {\r\n    if (isArray(track)) {\r\n      for (let i = 0, len = track.length; i < len; i++) {\r\n        this.addTrack(track[i])\r\n      }\r\n    } else if (track instanceof Track) {\r\n      this._tracks.push(track)\r\n      this._updateTime()\r\n    } else {\r\n      throw new Error('tracks must be an instance of `Track` or an array of `Track` instance!')\r\n    }\r\n  },\r\n\r\n  drawTracksByTime: function (time) {\r\n    this._draw.clear()\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let track = this._tracks[i]\r\n      let tps = track.getTrackPointsBeforeTime(time)\r\n      if (tps && tps.length) this._draw.drawTrack(tps)\r\n    }\r\n  },\r\n\r\n  _updateTime: function () {\r\n    this._minTime = this._tracks[0].getStartTrackPoint().time\r\n    this._maxTime = this._tracks[0].getEndTrackPoint().time\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let stime = this._tracks[i].getStartTrackPoint().time\r\n      let etime = this._tracks[i].getEndTrackPoint().time\r\n      if (stime < this._minTime) {\r\n        this._minTime = stime\r\n      }\r\n      if (etime > this._maxTime) {\r\n        this._maxTime = etime\r\n      }\r\n    }\r\n  }\r\n\r\n})\r\n\r\nexport const trackController = function (tracks, draw, options) {\r\n  return new TrackController(tracks, draw, options)\r\n}\r\n","import L from 'leaflet'\r\n/**\r\n * 时钟类，控制轨迹播放动画\r\n */\r\nexport const Clock = L.Class.extend({\r\n\r\n  includes: L.Mixin.Events,\r\n\r\n  options: {\r\n    // 播放速度\r\n    // 计算方法 fpstime * Math.pow(2, this._speed - 1)\r\n    speed: 12,\r\n    // 最大播放速度\r\n    maxSpeed: 65\r\n  },\r\n\r\n  initialize: function (trackController, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._trackController = trackController\r\n    this._endTime = this._trackController.getMaxTime()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this._speed = this.options.speed\r\n    this._maxSpeed = this.options.maxSpeed\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  start: function () {\r\n    if (this._intervalID) return\r\n    this._intervalID = L.Util.requestAnimFrame(this._tick, this)\r\n  },\r\n\r\n  stop: function () {\r\n    if (!this._intervalID) return\r\n    L.Util.cancelAnimFrame(this._intervalID)\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  rePlaying: function () {\r\n    this.stop()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this.start()\r\n  },\r\n\r\n  slowSpeed: function () {\r\n    this._speed = this._speed <= 1 ? this._speed : this._speed - 1\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  quickSpeed: function () {\r\n    this._speed = this._speed >= this._maxSpeed ? this._speed : this._speed + 1\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  getSpeed: function () {\r\n    return this._speed\r\n  },\r\n\r\n  getCurTime: function () {\r\n    return this._curTime\r\n  },\r\n\r\n  getStartTime: function () {\r\n    return this._trackController.getMinTime()\r\n  },\r\n\r\n  getEndTime: function () {\r\n    return this._trackController.getMaxTime()\r\n  },\r\n\r\n  isPlaying: function () {\r\n    return !!this._intervalID\r\n  },\r\n\r\n  setCursor: function (time) {\r\n    this._curTime = time\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this.fire('tick', {\r\n      time: this._curTime\r\n    })\r\n  },\r\n\r\n  setSpeed: function (speed) {\r\n    this._speed = speed\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  // 计算两帧时间间隔，单位：秒\r\n  _caculatefpsTime: function (now) {\r\n    let time\r\n    if (this._lastFpsUpdateTime === 0) {\r\n      time = 0\r\n    } else {\r\n      time = now - this._lastFpsUpdateTime\r\n    }\r\n    this._lastFpsUpdateTime = now\r\n    // 将毫秒转换成秒\r\n    time = time / 1000\r\n    return time\r\n  },\r\n\r\n  _tick: function () {\r\n    let now = +new Date()\r\n    let fpstime = this._caculatefpsTime(now)\r\n    let isPause = false\r\n    let stepTime = fpstime * Math.pow(2, this._speed - 1)\r\n    this._curTime += stepTime\r\n    if (this._curTime >= this._endTime) {\r\n      this._curTime = this._endTime\r\n      isPause = true\r\n    }\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this.fire('tick', {\r\n      time: this._curTime\r\n    })\r\n    if (!isPause) this._intervalID = L.Util.requestAnimFrame(this._tick, this)\r\n  }\r\n})\r\n\r\nexport const clock = function (trackController, options) {\r\n  return new Clock(trackController, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\n/**\r\n * 轨迹图层\r\n */\r\nexport const TrackLayer = L.Renderer.extend({\r\n\r\n  initialize: function (options) {\r\n    L.Renderer.prototype.initialize.call(this, options)\r\n    this.options.padding = 0.1\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._container = L.DomUtil.create('canvas', 'leaflet-zoom-animated')\r\n\r\n    var pane = map.getPane(this.options.pane)\r\n    pane.appendChild(this._container)\r\n\r\n    this._ctx = this._container.getContext('2d')\r\n\r\n    this._update()\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    L.DomUtil.remove(this._container)\r\n  },\r\n\r\n  getContainer: function () {\r\n    return this._container\r\n  },\r\n\r\n  getBounds: function () {\r\n    return this._bounds\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._map._animatingZoom && this._bounds) {\r\n      return\r\n    }\r\n\r\n    L.Renderer.prototype._update.call(this)\r\n\r\n    var b = this._bounds\r\n\r\n    var container = this._container\r\n\r\n    var size = b.getSize()\r\n\r\n    var m = L.Browser.retina ? 2 : 1\r\n\r\n    L.DomUtil.setPosition(container, b.min)\r\n\r\n    // set canvas size (also clearing it); use double size on retina\r\n    container.width = m * size.x\r\n    container.height = m * size.y\r\n    container.style.width = size.x + 'px'\r\n    container.style.height = size.y + 'px'\r\n\r\n    if (L.Browser.retina) {\r\n      this._ctx.scale(2, 2)\r\n    }\r\n\r\n    // translate so we use the same path coordinates after canvas element moves\r\n    this._ctx.translate(-b.min.x, -b.min.y)\r\n\r\n    // Tell paths to redraw themselves\r\n    this.fire('update')\r\n  }\r\n})\r\n","import L from 'leaflet'\n\nimport {\n  TrackLayer\n} from './tracklayer'\n\n/**\n * 绘制类\n * 完成轨迹线、轨迹点、目标物的绘制工作\n */\nvar arrTarget =[];\nexport const Draw = L.Class.extend({\n\n  trackPointOptions: {\n    isDraw: false,\n    useCanvas: true,\n    stroke: false,\n    color: '#ef0300',\n    fill: true,\n    fillColor: '#ef0300',\n    opacity: 0.3,\n    radius: 4\n  },\n  trackLineOptions: {\n    isDraw: false,\n    stroke: true,\n    color: '#1C54E2', // stroke color\n    weight: 2,\n    fill: false,\n    fillColor: '#000',\n    opacity: 0.3\n  },\n  targetOptions: {\n    useImg: false,\n    flashDrag: false,\n    arrImage: [],\n    imgUrl: '../../static/images/ship.png',\n    width: 8,\n    height: 18,\n    color: 'rgb(0 0 0 / 0%)', // stroke color\n    fillColor: 'rgb(0 0 0 / 0%)'\n  },\n  toolTipOptions: {\n    offset: [0, 0],\n    direction: 'top',\n    permanent: false\n  },\n\n  initialize: function (map, options) {\n    L.extend(this.trackPointOptions, options.trackPointOptions)\n    L.extend(this.trackLineOptions, options.trackLineOptions)\n    L.extend(this.targetOptions, options.targetOptions)\n    L.extend(this.toolTipOptions, options.toolTipOptions)\n\n    this._showTrackPoint = this.trackPointOptions.isDraw\n    this._showTrackLine = this.trackLineOptions.isDraw\n\n    this._map = map\n    this._map.on('mousemove', this._onmousemoveEvt, this)\n\n    this._trackLayer = new TrackLayer().addTo(map)\n    this._trackLayer.on('update', this._trackLayerUpdate, this)\n\n    this._canvas = this._trackLayer.getContainer()\n    this._ctx = this._canvas.getContext('2d')\n    this.dem =0;\n    this._bufferTracks = []\n\n    if (!this.trackPointOptions.useCanvas) {\n      this._trackPointFeatureGroup = L.featureGroup([]).addTo(map)\n    }\n\n    if(arrTarget.length == 0){\n      let promises=[];\n      for(let i=0;i<this.targetOptions.arrImage.length;i++){\n        const promise = new Promise((resolve => {\n          const img = new Image()\n          img.onload = () => {\n            // this[i]  = img\n            resolve(img);\n          }\n          img.onerror = () => {\n\n            throw new Error('img load error!')\n          }\n          img.src = this.targetOptions.arrImage[i]\n        }))\n        promises.push(promise);\n      }\n      Promise.all(promises).then((value)=>{\n        arrTarget = [...value];\n\n      })\n    }\n    // 目标如果使用图片，先加载图片\n    if (this.targetOptions.useImg) {\n      const img = new Image()\n      img.onload = () => {\n        this._targetImg = img\n      }\n      img.onerror = () => {\n        throw new Error('img load error!')\n      }\n\n      img.src = this.targetOptions.imgUrl\n    }\n  },\n\n  update: function () {\n    this._trackLayerUpdate()\n  },\n\n  drawTrack: function (trackpoints) {\n    this._bufferTracks.push(trackpoints)\n    this._drawTrack(trackpoints)\n  },\n\n  showTrackPoint: function () {\n    this._showTrackPoint = true\n    this.update()\n  },\n\n  hideTrackPoint: function () {\n    this._showTrackPoint = false\n    this.update()\n  },\n\n  showTrackLine: function () {\n    this._showTrackLine = true\n    this.update()\n  },\n\n  hideTrackLine: function () {\n    this._showTrackLine = false\n    this.update()\n  },\n\n  remove: function () {\n    this._bufferTracks = []\n    this._trackLayer.off('update', this._trackLayerUpdate, this)\n    this._map.off('mousemove', this._onmousemoveEvt, this)\n    if (this._map.hasLayer(this._trackLayer)) {\n      this._map.removeLayer(this._trackLayer)\n    }\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\n      this._map.removeLayer(this._trackPointFeatureGroup)\n    }\n  },\n\n  clear: function () {\n    this._clearLayer()\n    this._bufferTracks = []\n  },\n\n  _trackLayerUpdate: function () {\n    if (this._bufferTracks.length) {\n      this._clearLayer()\n      this._bufferTracks.forEach(function (element, index) {\n        this._drawTrack(element)\n      }.bind(this))\n    }\n  },\n\n  _onmousemoveEvt: function (e) {\n    if (!this._showTrackPoint) {\n      return\n    }\n    let point = e.layerPoint\n    if (this._bufferTracks.length) {\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\n          let tpoint = this._getLayerPoint(this._bufferTracks[i][j])\n          if (point.distanceTo(tpoint) <= this.trackPointOptions.radius) {\n            this._opentoolTip(this._bufferTracks[i][j])\n            return\n          }\n        }\n      }\n    }\n    if (this._map.hasLayer(this._tooltip)) {\n      this._map.removeLayer(this._tooltip)\n    }\n    this._canvas.style.cursor = 'pointer'\n  },\n\n  _opentoolTip: function (trackpoint) {\n    if (this._map.hasLayer(this._tooltip)) {\n      this._map.removeLayer(this._tooltip)\n    }\n    this._canvas.style.cursor = 'default'\n    let latlng = L.latLng(trackpoint.lat, trackpoint.lng)\n    let tooltip = this._tooltip = L.tooltip(this.toolTipOptions)\n    tooltip.setLatLng(latlng)\n    tooltip.addTo(this._map)\n    tooltip.setContent(this._getTooltipText(trackpoint))\n  },\n\n  _drawTrack: function (trackpoints) {\n\n    // 画轨迹线\n    if (this._showTrackLine) {\n      this._drawTrackLine(trackpoints)\n    }\n    // 画船\n    let targetPoint = trackpoints[trackpoints.length - 1]\n    if (this.targetOptions.useImg && this._targetImg) {\n      this._drawShipImage(targetPoint,trackpoints)\n    } else {\n      this._drawShipCanvas(targetPoint)\n    }\n    // 画经过的轨迹点\n    if (this._showTrackPoint) {\n      if (this.trackPointOptions.useCanvas) {\n        this._drawTrackPointsCanvas(trackpoints)\n      } else {\n        this._drawTrackPointsSvg(trackpoints)\n      }\n    }\n  },\n\n  _drawTrackLine: function (trackpoints) {\n    let options = this.trackLineOptions\n    let tp0 = this._getLayerPoint(trackpoints[0])\n    this._ctx.save()\n    this._ctx.beginPath()\n    // 画轨迹线\n    this._ctx.moveTo(tp0.x, tp0.y)\n    for (let i = 1, len = trackpoints.length; i < len; i++) {\n      let tpi = this._getLayerPoint(trackpoints[i])\n      this._ctx.lineTo(tpi.x, tpi.y)\n    }\n    this._ctx.globalAlpha = options.opacity\n    if (options.stroke) {\n      this._ctx.strokeStyle = options.color\n      this._ctx.lineWidth = options.weight\n      this._ctx.stroke()\n    }\n    if (options.fill) {\n      this._ctx.fillStyle = options.fillColor\n      this._ctx.fill()\n    }\n    this._ctx.restore()\n  },\n\n  _drawTrackPointsCanvas: function (trackpoints) {\n    let options = this.trackPointOptions\n    this._ctx.save()\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\n      if (trackpoints[i].isOrigin) {\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\n        let radius = options.radius\n        let point = this._map.latLngToLayerPoint(latLng)\n        this._ctx.beginPath()\n        this._ctx.arc(point.x, point.y, radius, 0, Math.PI * 2, false)\n        this._ctx.globalAlpha = options.opacity\n        if (options.stroke) {\n          this._ctx.strokeStyle = options.color\n          this._ctx.stroke()\n        }\n        if (options.fill) {\n          this._ctx.fillStyle = options.fillColor\n          this._ctx.fill()\n        }\n      }\n    }\n    this._ctx.restore()\n  },\n\n  _drawTrackPointsSvg: function (trackpoints) {\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\n      if (trackpoints[i].isOrigin) {\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\n        let cricleMarker = L.circleMarker(latLng, this.trackPointOptions)\n        cricleMarker.bindTooltip(this._getTooltipText(trackpoints[i]), this.toolTipOptions)\n        this._trackPointFeatureGroup.addLayer(cricleMarker)\n      }\n    }\n  },\n\n  _drawShipCanvas: function (trackpoint) {\n    // let point = this._getLayerPoint(trackpoint)\n    // let rotate = trackpoint.dir || 0\n    // let w = this.targetOptions.width\n    // let h = this.targetOptions.height\n    // let dh = h / 3\n    //\n    // this._ctx.save()\n    // this._ctx.fillStyle = this.targetOptions.fillColor\n    // this._ctx.strokeStyle = this.targetOptions.color\n    // this._ctx.translate(point.x, point.y)\n    // this._ctx.rotate((Math.PI / 180) * rotate)\n    // this._ctx.beginPath()\n    // this._ctx.moveTo(0, 0 - h / 2)\n    // this._ctx.lineTo(0 - w / 2, 0 - h / 2 + dh)\n    // this._ctx.lineTo(0 - w / 2, 0 + h / 2)\n    // this._ctx.lineTo(0 + w / 2, 0 + h / 2)\n    // this._ctx.lineTo(0 + w / 2, 0 - h / 2 + dh)\n    // this._ctx.closePath()\n    // this._ctx.fill()\n    // this._ctx.stroke()\n    // this._ctx.restore()\n  },\n\n  _drawShipImage: function (trackpoint,trackpoints) {\n  if(!this.targetOptions.flashDrag)\n    {\n      if(trackpoint.isOrigin == true){\n        this.dem++;\n      }\n\n\n      let point = this._getLayerPoint(trackpoint)\n      let dir = trackpoint.dir || 0\n      let width = this.targetOptions.width\n      let height = this.targetOptions.height\n      let offset = {\n        x: width / 2,\n        y: height / 2\n      }\n\n      this._ctx.save()\n      this._ctx.translate(point.x, point.y)\n      this._ctx.rotate((Math.PI / 180) * dir)\n      this._ctx.drawImage(arrTarget[trackpoints[0].vt], 0 - offset.x, 0 - offset.y, width, height)\n      this._ctx.restore()\n    }\n    // let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\n    // let cricleMarker = L.circleMarker(latLng, this.trackPointOptions)\n    // cricleMarker.bindTooltip(this._getTooltipText(trackpoints[i]), this.toolTipOptions)\n    // this._trackPointFeatureGroup.addLayer(cricleMarker)\n\n  },\n\n  _getTooltipText: function (targetobj) {\n    let content = []\n    content.push('<table class=\"border-table-tooltip\">')\n    if (targetobj.info && targetobj.info.length) {\n      for (let i = 0, len = targetobj.info.length; i < len; i++) {\n        content.push('<tr>')\n        content.push('<td>' + targetobj.info[i].key + '</td>')\n        content.push('<td>' + targetobj.info[i].value + '</td>')\n        content.push('</tr>')\n      }\n    }\n    content.push('</table>')\n    content = content.join('')\n    return content\n  },\n\n  _clearLayer: function () {\n    let bounds = this._trackLayer.getBounds()\n    if (bounds) {\n      let size = bounds.getSize()\n      this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y)\n    } else {\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height)\n    }\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\n      this._trackPointFeatureGroup.clearLayers()\n    }\n  },\n\n  _getLayerPoint (trackpoint) {\n    return this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\n  }\n})\n\nexport const draw = function (map, options) {\n  return new Draw(map, options)\n}\n","import L from 'leaflet'\r\n\r\nimport {\r\n  Track\r\n} from './track'\r\nimport {\r\n  TrackController\r\n} from './trackcontroller'\r\nimport {\r\n  Clock\r\n} from './clock'\r\nimport {\r\n  Draw\r\n} from './draw'\r\nimport * as Util from './util'\r\n\r\n/**\r\n * single track data\r\n * [{lat: 30, lng: 116, time: 1502529980, heading: 300, info:[]},{},....]\r\n *\r\n * mutiple track data\r\n * [single track data, single track data, single track data]\r\n */\r\nexport const TrackPlayBack = L.Class.extend({\r\n\r\n  includes: L.Mixin.Events,\r\n\r\n  initialize: function (data, map, options = {}) {\r\n    let drawOptions = {\r\n      trackPointOptions: options.trackPointOptions,\r\n      trackLineOptions: options.trackLineOptions,\r\n      targetOptions: options.targetOptions,\r\n      toolTipOptions: options.toolTipOptions\r\n    }\r\n    this.tracks = this._initTracks(data)\r\n    this.draw = new Draw(map, drawOptions)\r\n    this.trackController = new TrackController(this.tracks, this.draw)\r\n    this.clock = new Clock(this.trackController, options.clockOptions)\r\n\r\n    this.clock.on('tick', this._tick, this)\r\n  },\r\n  start: function () {\r\n    this.clock.start()\r\n    return this\r\n  },\r\n  stop: function () {\r\n    this.clock.stop()\r\n    return this\r\n  },\r\n  rePlaying: function () {\r\n    this.clock.rePlaying()\r\n    return this\r\n  },\r\n  slowSpeed: function () {\r\n    this.clock.slowSpeed()\r\n    return this\r\n  },\r\n  quickSpeed: function () {\r\n    this.clock.quickSpeed()\r\n    return this\r\n  },\r\n  getSpeed: function () {\r\n    return this.clock.getSpeed()\r\n  },\r\n  getCurTime: function () {\r\n    return this.clock.getCurTime()\r\n  },\r\n  getStartTime: function () {\r\n    return this.clock.getStartTime()\r\n  },\r\n  getEndTime: function () {\r\n    return this.clock.getEndTime()\r\n  },\r\n  isPlaying: function () {\r\n    return this.clock.isPlaying()\r\n  },\r\n  setCursor: function (time) {\r\n    this.clock.setCursor(time)\r\n    return this\r\n  },\r\n  setSpeed: function (speed) {\r\n    this.clock.setSpeed(speed)\r\n    return this\r\n  },\r\n  showTrackPoint: function () {\r\n    this.draw.showTrackPoint()\r\n    return this\r\n  },\r\n  hideTrackPoint: function () {\r\n    this.draw.hideTrackPoint()\r\n    return this\r\n  },\r\n  showTrackLine: function () {\r\n    this.draw.showTrackLine()\r\n    return this\r\n  },\r\n  hideTrackLine: function () {\r\n    this.draw.hideTrackLine()\r\n    return this\r\n  },\r\n  dispose: function () {\r\n    this.clock.off('tick', this._tick)\r\n    this.draw.remove()\r\n    this.tracks = null\r\n    this.draw = null\r\n    this.trackController = null\r\n    this.clock = null\r\n  },\r\n  _tick: function (e) {\r\n    this.fire('tick', e)\r\n  },\r\n  _initTracks: function (data) {\r\n    let tracks = []\r\n    if (Util.isArray(data)) {\r\n      if (Util.isArray(data[0])) {\r\n        // 多条轨迹\r\n        for (let i = 0, len = data.length; i < len; i++) {\r\n          tracks.push(new Track(data[i]))\r\n        }\r\n      } else {\r\n        // 单条轨迹\r\n        tracks.push(new Track(data))\r\n      }\r\n    }\r\n    return tracks\r\n  }\r\n})\r\n\r\nexport const trackplayback = function (data, map, options) {\r\n  return new TrackPlayBack(data, map, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  TrackPlayBack,\r\n  trackplayback\r\n} from './trackplayback'\r\n\r\nL.TrackPlayBack = TrackPlayBack\r\nL.trackplayback = trackplayback\r\n"],"sourceRoot":""}